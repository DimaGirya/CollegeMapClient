<!DOCTYPE html>
<html lang="en" ng-app="map">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>College map</title>
    <script src = "js/lib/jquery/jquery-2.2.4.min.js"></script>
    <script src = "js/lib/bootstrap-3.3.6-dist/bootstrap.min.js"></script>
    <link rel="stylesheet" href="css/bootstrap-3.3.6-dist/css/bootstrap.min.css">
    <!-- Optional theme  -->
    <link rel="stylesheet" href="css/bootstrap-3.3.6-dist/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="css/style.css">

</head>
<body ng-controller="mapController" >
<div style ="position: absolute;">
    <header>
        <a  href = "#"><img src = "images/logo.png"></a>
    </header>
    <main>

            <table>
                <tr ng-repeat="column in mapData" >
                    <th ng-repeat="box in column">
                        <div ng-class="['box']">
                            <div ng-class = "['box_inner',box.border, box.status]" ng-click = "onRoomClicked(box)">
                             <!--
                                Id:{{box.place_id}}
                                <br>
                                {{box.coord_x}},{{box.coord_y}}
                                -->
                            </div>
                        </div>
                    </th>
                </tr>
            </table>

    </main>
    <footer>
        <button type="button" class="buttonNav" data-toggle="modal" data-target="#reportRoomDialog">Report</button>
        <button type="button" class="buttonNav" data-toggle="modal" data-target="#findPatchDialog">Navigate</button>
        <button type="button" class="buttonNav"  data-toggle="modal" data-target="#mapLegend">Legend</button>
        <button type="button" class="buttonNav" ng-click="refreshMapData()" >Update</button>
    </footer>
</div>


<div class="modal fade" id="findPatchDialog" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content ">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Find patch</h4>
            </div>
            <div class="modal-body">
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control inputFindPatch"  placeholder="From" ng-change="bindIdToRoomName(roomFrom)" ng-model="roomFrom.name" id="from">
                        <!--
                         <div class = "roomSearch">
                             <div ng-repeat=" room in rooms | filter:roomFrom.name" >
                                 <div>{{room.name}}</div>
                             </div>
                        </div>
                    -->
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control inputFindPatch"  placeholder="To" ng-change="bindIdToRoomName(roomTo)" ng-model="roomTo.name" id="to">
                     <!--
                        <div class = "roomSearch">
                            <div ng-repeat=" room in rooms | filter:roomTo.name" >
                                <div>{{room.name}}</div>
                            </div>
                        </div>
                         -->
                    </div>

                    <button type="submit" ng-click="sendFindPatchRequest()" data-dismiss="modal" class="buttonPopup">Go!</button>
                </form>
            </div>
            <!--
            <div class="modal-footer">
                <button type="button" class="buttonNav" data-dismiss="modal">Close</button>
            </div>
            -->
        </div>

    </div>
</div>


<div class="modal fade" id="reportRoomDialog" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Report room status</h4>
            </div>
            <div class="modal-body">
                <form>
                    <input type="text" ng-model="classToReport.name" placeholder="Room to report" ng-change="bindIdToClassName()" class="form-control inputFindPatch">
                    <!--
                    <div class = "roomSearch">
                        <div ng-repeat=" class in classes | filter:classToReport.name" >
                            <div>{{class.name}}</div>
                        </div>
                    </div>
                    -->
                    <label>
                        <input type="radio" ng-model="classToReport.status" value="free">
                        Free
                    </label>
                    <br/>
                    <label>
                        <input type="radio" ng-model="classToReport.status" value="engaged">
                        Engaged
                    </label>
                    <br/>
                    <label>
                        <input type="radio" ng-model="classToReport.status"  value="lecture">
                        Lecture
                    </label>
                    <br>
                    <label>
                        <input type="radio" ng-model="classToReport.status" value="notAvailable">
                        Room is not available
                    </label>
                    <br>
                    <button type="button" class="buttonPopup" ng-click="sendReportClassRequest()" data-dismiss="modal">Submit</button>
                </form>
            </div>
            <!--
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
            -->
        </div>

    </div>
</div>



<div class="modal fade" id="mapLegend" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Map legend</h4>
            </div>
            <div class="modal-body">
                <div class = "demo_div">
                    Free:
                    <div class="free demo_box"></div>
                </div>
                <div class = "demo_div">
                    Engaged:
                    <div class="engaged demo_box"></div>
                </div>
                <div class = "demo_div">
                    Not available:
                    <div class="notAvailable demo_box"></div>
                </div>
                <div class = "demo_div">
                    Office:
                    <div class="office demo_box"></div>
                </div>
                <div class = "demo_div">
                    Hallway:
                    <div class="hallway demo_box"></div>
                </div>
                <div class = "clear"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>



<div class="modal fade" id="roomInformation" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Room information</h4>
            </div>
            <div class="modal-body">
                <div>
                    Type:{{roomToShow.type}}
                    <br>
                    Name: {{roomToShow.name}}
                    <br>
                    Status:  {{roomToShow.status}}
                    <br>
                    Description:{{roomToShow.description}}

                <div class="form-group">
                    <input type="text" class="form-control inputFindPatch"  placeholder="Your comments" ng-model="commentsInput">
                </div>
                <button type="submit" ng-click="sendCommentsToServer()" data-dismiss="modal" class="buttonPopup">Add comments</button>
            </div>
            </div>

        </div>
    </div>
</div>


<script src = "js/lib/angular/angular.min.js" ></script>
<script src = "js/map.js"></script>
</body>
</html>